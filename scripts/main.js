"use strict";var FIC=FIC||[];$(document).ready(function(){if(FIC.Slides.preloadImages(),!sessionStorage.getItem("viewState")){sessionStorage.setItem("viewState",btoa(JSON.stringify({displayGuide:!0,visitedLinks:[]})))}for(var e in FIC)"function"==typeof FIC[e].init&&FIC[e].init()}),FIC.Home={datasheetHandler:function(){var e=$(".datasheet");$(document).on("click",".datasheet-link",function(){e.addClass("open").one("touchend click",function(){$(this).removeClass("open")})}),$("#help-button").hover(function(){$("#help-text").removeClass("gato__help__ballon--hide"),$("#help-text").addClass("gato__help__ballon--show")},function(){$("#help-text").addClass("gato__help__ballon--hide"),$("#help-text").removeClass("gato__help__ballon--show")})},init:function(){FIC.Home.datasheetHandler(),$(".section__link").on("click",function(){var e=JSON.parse(atob(sessionStorage.getItem("viewState"))),i=$(this).attr("href").replace(".html","");e.visitedLinks.find(function(e){return e===i})||e.visitedLinks.push(i),sessionStorage.removeItem("viewState"),sessionStorage.setItem("viewState",btoa(JSON.stringify(e)))}),this.setVisitedLinks(),this.startFirstGuideTalk()},setVisitedLinks:function(){JSON.parse(atob(sessionStorage.getItem("viewState"))).visitedLinks.map(function(e){return $('[href="'+e+'.html"]').addClass("section__link--visited")})},startFirstGuideTalk:function(){var e=JSON.parse(atob(sessionStorage.getItem("viewState")));e.displayGuide?(window.setTimeout(function(){$("#guide-talk-1").removeClass("gato__help__ballon--hide"),$("#guide-talk-1").addClass("gato__help__ballon--show")},3e3),window.setTimeout(function(){$("#guide-talk-1").removeClass("gato__help__ballon--show"),$("#guide-talk-1").addClass("gato__help__ballon--hide"),$("#guide-talk-2").removeClass("gato__help__ballon--hide"),$("#guide-talk-2").addClass("gato__help__ballon--show")},1e4),window.setTimeout(function(){$("#guide-talk-2").removeClass("gato__help__ballon--show"),$("#guide-talk-2").addClass("gato__help__ballon--hide"),$(".section__link").addClass("section__link--show")},2e4),e.displayGuide=!1,sessionStorage.removeItem("viewState"),sessionStorage.setItem("viewState",btoa(JSON.stringify(e)))):$(".section__link").addClass("section__link--show")}},FIC.Slides={currentSlide:1,totalSlides:0,$slides:void 0,showHideSlides:function(e,i){FIC.Slides.$slides.filter(e+", "+i).toggleClass("hide"),FIC.Slides.$slides.filter(i).data("gallery")?FIC.Slides.$slides.parent().addClass("section--gallery"):FIC.Slides.$slides.parent().removeClass("section--gallery")},controlSlidesHandler:function(){$(document).on("click",".slide__control--prev",function(){var e=FIC.Slides.currentSlide;1===FIC.Slides.currentSlide?window.location.href="/":FIC.Slides.currentSlide-=1,FIC.Slides.showHideSlides(".slide--"+e,".slide--"+FIC.Slides.currentSlide)}),$(document).on("click",".slide__control--next",function(){var e=FIC.Slides.currentSlide;FIC.Slides.currentSlide===FIC.Slides.totalSlides?window.location.href="/":FIC.Slides.currentSlide+=1,FIC.Slides.showHideSlides(".slide--"+e,".slide--"+FIC.Slides.currentSlide)})},swapInteractionHandler:function(){var e=$(".slide__interaction--swap");if(e.length){var a=e.find(".swap__btn");a.on("click",function(){var e=$(this),i=e.data("swap"),t=e.parents(".slide__interaction--swap").find(".swap__figure"),n=t.data("src");a.removeClass("active"),e.addClass("active"),t.attr("src",n+i+".jpg")})}},setPortraitTops:function(e,i){var t=[];e.filter(".active").each(function(){t.push(this.getAttribute("data-swap"))}),-1!==t.indexOf("olhos")&&-1!==t.indexOf("oculos")&&t.pop(),i.attr("src",0===t.length?"./../img/retratos/autorretrato.jpg":"./../img/retratos/retrato/"+t.join("_")+".jpg")},portraitTopsHandler:function(){var e=$(".slide__interaction--portrait");if(e.length){var i=e.find(".portrait-tops__btn"),t=e.find(".portrait-figure");i.on("click",function(){$(this).toggleClass("active"),FIC.Slides.setPortraitTops(i,t)})}},swapHandler:function(){var e=$(".slide__interaction--swap");e.length&&e.find("figure").eq(0).on("touchend click",function(){$(this).addClass("d-none"),e.find("figure").eq(1).removeClass("d-none")})},outlineHandler:function(){var i=$(".slide--7 .slide__button");i.length&&i.on("touchend click",function(){i.find("img:first-child").removeClass("d-none"),i.find("img:nth-child(2)").addClass("d-none"),$(this).find("img:first-child").addClass("d-none"),$(this).find("img:nth-child(2)").removeClass("d-none");var e=i.index(this);$(".outline__figure").addClass("d-none"),$(".outline__figure").eq(e).removeClass("d-none")})},modalsHandler:function(){$(document).on("touchend click",".slide__figure[data-modal]",function(e){e.stopPropagation(),e.preventDefault();var i=$($(this).data("modal"));i.addClass("show"),i.on("click.modal",function(e){this===e.target&&i.find(".modal__close").trigger("click")})}).on("touchend click",".modal__close",function(){$(this).parents(".modal.show").removeClass("show").off("click.modal")})},showAnimation:function(){$(document).on("touchend click","img[data-animation]",function(){var e=$(this),i=e.data("animation");e.attr("src",i)})},lightsHandler:function(){var e=$(".section.section--natureza");if(e.length){var t=e.find(".lights .slide__figure");e.find("a.light__item").on("click",function(e){e.preventDefault(),$(this).toggleClass("active");var i=this.className.match(/\d+/);t.toggleClass("shadow--"+i)})}},landscapesHandler:function(){var n=$(".section--paisagem");if(n.length){var e=n.find(".images-left .slide__figure"),i=n.find(".images-right .slide__figure");e.on("click",function(){var e=$(this);$(".gato").removeClass("erro"),e.toggleClass("selected"),i.toggleClass("selectable"),e.hasClass("selected")?$(".slide__figure").not(".selected").addClass("unselected"):$(".slide__figure").removeClass("unselected")}),i.on("click",i,function(){var e=$(this),i=n.find(".images-left .slide__figure.selected"),t=e.data("image-answer");i.data("image-answer")===t?($(".answer"+i.data("image-answer")).show(),e.addClass("right-answer"),i.addClass("right-answer"),n.find(".images-left .slide__figure").removeClass("selected").removeClass("unselected"),n.find(".images-right .slide__figure").removeClass("selectable"),$(".gato").removeClass("erro")):$(".gato").addClass("erro")})}},preloadImages:function(){for(var e=$("img").map(function(){return this.src}).get(),i=[],t=0;t<e.length;t++)i[t]=new Image,i[t].src=e[t]},init:function(){FIC.Slides.$slides=$(".slide"),FIC.Slides.totalSlides=FIC.Slides.$slides.length,FIC.Slides.canvasHeight=875,0<FIC.Slides.totalSlides&&FIC.Slides.controlSlidesHandler(),FIC.Slides.swapInteractionHandler(),FIC.Slides.portraitTopsHandler(),FIC.Slides.outlineHandler(),FIC.Slides.swapHandler(),FIC.Slides.modalsHandler(),FIC.Slides.showAnimation(),FIC.Slides.lightsHandler(),FIC.Slides.landscapesHandler()}},function(o){o.fn.magnify&&(o("<style>.lens-mobile {position:fixed;top:0;left:0;width:100%;height:100%;background:#ccc;display:none;overflow:scroll;-webkit-overflow-scrolling:touch;z-index:9999;}.magnify-mobile>.close {position:fixed;top:10px;right:10px;width:32px;height:32px;background:#333;border-radius:16px;color:#fff;display:inline-block;font:normal bold 20px/32px sans-serif;letter-spacing:0;opacity:0.8;text-align:center;text-shadow:none;z-index:9999;}@media only screen and (min-device-width:320px) and (max-device-width:773px) {/* Assume QHD (1440 x 2560) is highest mobile resolution */.lens-mobile { display:block; }}</style>").appendTo("head"),o(window).on("load",function(){o("body").append('<div class="magnify-mobile"><div class="lens-mobile"></div></div>');var s=o(".lens-mobile");if(s.is(":visible")&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints)){var e=o(".magnify"),i=o(".magnify-mobile");e.off(),i.hide().append('<i class="close">&times;</i>'),i.children(".close").on(e.data("mobileCloseEvent"),function(){i.toggle()}),e.children("img").on({touchend:function(){if(!o(this).data("drag")){var e=o(this).data("scrollOffset");i.toggle(),s.scrollLeft(e.x),s.scrollTop(e.y)}},touchmove:function(){o(this).data("drag",!0)},touchstart:function(e){s.html('<img src="'+o(this).prev(".magnify-lens").css("background-image").replace(/url\(["']?|["']?\)/g,"")+'" alt="">');var i=o(this),t=i.data("zoomSize"),n=(e.originalEvent.touches[0].pageX-i.offset().left)/i.width(),a=(e.originalEvent.touches[0].pageY-i.offset().top)/i.height();i.data("scrollOffset",{x:t.width*n-window.innerWidth/2,y:t.height*a-window.innerHeight/2}),o(this).data("drag",!1)}})}}))}(jQuery),function(H){H.fn.magnify=function(k){k=H.extend({src:"",speed:100,timeout:-1,touchBottomOffset:0,finalWidth:null,finalHeight:null,magnifiedWidth:null,magnifiedHeight:null,limitBounds:!1,mobileCloseEvent:"touchstart",afterLoad:function(){}},k);var e=this,F=H("html"),i=0,x=function(){clearTimeout(i),i=setTimeout(function(){e.destroy(),e.magnify(k)},100)};return this.destroy=function(){return this.each(function(){var e=H(this),i=e.prev("div.magnify-lens"),t=e.data("originalStyle");e.parent("div.magnify").length&&i.length&&(t?e.attr("style",t):e.removeAttr("style"),e.unwrap(),i.remove())}),H(window).off("resize",x),e},H(window).resize(x),this.each(function(){!function(e){var o=H(e),i=o.closest("a"),n={};for(var t in k)n[t]=o.attr("data-magnify-"+t.toLowerCase());var a=n.src||k.src||i.attr("href")||"";if(a){var s,l,d,r,c,f,h,u,g,m,p,v,_,C,w=0,S=0,b=function(){var e=s.offset();return C={top:o.offset().top-e.top+parseInt(o.css("border-top-width"))+parseInt(o.css("padding-top")),left:o.offset().left-e.left+parseInt(o.css("border-left-width"))+parseInt(o.css("padding-left"))},e.top+=C.top,e.left+=C.left,e},$=function(){l.is(":visible")&&l.fadeOut(k.speed,function(){F.removeClass("magnifying").trigger("magnifyend")})},y=function(e){if(r){if(e?(e.preventDefault(),g=e.pageX||e.originalEvent.touches[0].pageX,m=e.pageY||e.originalEvent.touches[0].pageY,o.data("lastPos",{x:g,y:m})):(g=o.data("lastPos").x,m=o.data("lastPos").y),p=g-_.left,v=m-_.top-k.touchBottomOffset,l.is(":animated")||(w<p&&p<d-w&&S<v&&v<r-S?l.is(":hidden")&&(F.addClass("magnifying").trigger("magnifystart"),l.fadeIn(k.speed)):$()),l.is(":visible")){var i="";if(c&&f){var t=-Math.round(p/d*c-h/2),n=-Math.round(v/r*f-u/2);if(k.limitBounds){var a=-Math.round((d-w)/d*c-h/2),s=-Math.round((r-S)/r*f-u/2);0<t?t=0:t<a&&(t=a),0<n?n=0:n<s&&(n=s)}i=t+"px "+n+"px"}l.css({top:Math.round(v-u/2)+C.top+"px",left:Math.round(p-h/2)+C.left+"px","background-position":i})}}else x()};isNaN(+n.speed)||(k.speed=+n.speed),isNaN(+n.timeout)||(k.timeout=+n.timeout),isNaN(+n.finalWidth)||(k.finalWidth=+n.finalWidth),isNaN(+n.finalHeight)||(k.finalHeight=+n.finalHeight),isNaN(+n.magnifiedWidth)||(k.magnifiedWidth=+n.magnifiedWidth),isNaN(+n.magnifiedHeight)||(k.magnifiedHeight=+n.magnifiedHeight),"true"===n.limitBounds&&(k.limitBounds=!0),"function"==typeof window[n.afterLoad]&&(k.afterLoad=window[n.afterLoad]),/\b(Android|BlackBerry|IEMobile|iPad|iPhone|Mobile|Opera Mini)\b/.test(navigator.userAgent)?isNaN(+n.touchBottomOffset)||(k.touchBottomOffset=+n.touchBottomOffset):k.touchBottomOffset=0,o.data("originalStyle",o.attr("style"));var I=new Image;H(I).on({load:function(){o.css("display","block"),o.parent(".magnify").length||o.wrap('<div class="magnify"></div>'),s=o.parent(".magnify"),o.prev(".magnify-lens").length?s.children(".magnify-lens").css("background-image","url('"+a+"')"):o.before('<div class="magnify-lens loading" style="background:url(\''+a+"') 0 0 no-repeat\"></div>"),(l=s.children(".magnify-lens")).removeClass("loading"),d=k.finalWidth||o.width(),r=k.finalHeight||o.height(),c=k.magnifiedWidth||I.width,f=k.magnifiedHeight||I.height,h=l.width(),u=l.height(),_=b(),k.limitBounds&&(w=h/2/(c/d),S=u/2/(f/r)),c===I.width&&f===I.height||l.css("background-size",c+"px "+f+"px"),o.data("zoomSize",{width:c,height:f}),s.data("mobileCloseEvent",n.mobileCloseEvent||k.mobileCloseEvent),I=null,k.afterLoad(),l.is(":visible")&&y(),s.off().on({"mousemove touchmove":y,mouseenter:function(){_=b()},mouseleave:$}),0<=k.timeout&&s.on("touchend",function(){setTimeout($,k.timeout)}),H("body").not(s).on("touchstart",$);var e=o.attr("usemap");if(e){var t=H("map[name="+e.slice(1)+"]");o.after(t),s.click(function(e){if(e.clientX||e.clientY){l.hide();var i=document.elementFromPoint(e.clientX||e.originalEvent.touches[0].clientX,e.clientY||e.originalEvent.touches[0].clientY);"AREA"===i.nodeName?i.click():H("area",t).each(function(){var e=H(this).attr("coords").split(",");if(p>=e[0]&&p<=e[2]&&v>=e[1]&&v<=e[3])return this.click(),!1})}})}i.length&&(i.css("display","inline-block"),!i.attr("href")||n.src||k.src||i.click(function(e){e.preventDefault()}))},error:function(){I=null}}),I.src=a}}(this)})}}(jQuery);